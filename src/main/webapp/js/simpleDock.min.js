/*!
 * simpleDock v1 jQuery Plugin
 * http://www.sans-sucre-ajoute.com/
 * http://www.catapulpe.fr/
 * Agence Web Catapulpe || Sans Sucre Ajouté
 * 2011, Léonard MEYER
 * licence : libre, citez vos sources !
 *
 */
(function($){

	$.fn.makeDock=function(variable){
		var defaults={value:10,timeOn:250,timeOff:400, type: "horizontal", animation: "top"};
		var options=$.extend(defaults,variable);
		var defValue=parseInt(this.children('li').css('top'));
		this.resizeContainer(options.type);
		this.children('li')
			.hover(function(){$(this)
			.stop()
			.slideObjet(options.value,options.timeOn,true, options.animation)},
			function(){$(this).stop().slideObjet(defValue,options.timeOff,false, options.animation)});
		return this};
		
	$.fn.resizeContainer=function(type){
		var totalWidth=1;
		var loop= true;
		this.children().each(function(){
					if(loop){
					totalWidth+=$(this)
					.width()+parseInt($(this)
					.css('marginRight'))+parseInt($(this)
					.css('marginLeft'));
					if(type ==="vertical"){
						loop=false;
					}
					}
			});
		this.css({'width':totalWidth});
		return this};
		
		$.fn.slideObjet=function(value,time,status, animation){
			if(!status){$('.p_textdock').fadeOut(time/2,function(){$(this).remove()});
			}
			value=-(value);
			
			if(animation ==="top"){
			this.animate({ top:value},time,function(){
				if(status){
				var name=$(this).children('a').children('img').attr('alt');
				$(this).append('<div class="p_textdock">'+name+'</div>');
				$('.p_textdock').fadeIn(time)
				}
			});
			

			


			this.prev().stop().animate({top:(value/2)},time);
			this.next().stop().animate({top:(value/2)},time);

			}
			if(animation ==="right"){
			this.animate({ right:value},time,function(){
				if(status){
				var name=$(this).children('a').children('img').attr('alt');
				$(this).append('<div class="p_textdock">'+name+'</div>');
				$('.p_textdock').fadeIn(time)
				}
			});
			

			


			this.prev().stop().animate({right:(value/2)},time);
			this.next().stop().animate({right:(value/2)},time);

			}
			if(animation ==="left"){
			this.animate({ right:value},time,function(){
				if(status){
				var name=$(this).children('a').children('img').attr('alt');
				$(this).append('<div class="p_textdock">'+name+'</div>');
				$('.p_textdock').fadeIn(time)
				}
			});
			
			this.prev().stop().animate({left:-(value/2)},time);
			this.next().stop().animate({left:-(value/2)},time);

			}
			if(animation ==="bot"){
			this.animate({ top:-(value)},time,function(){
				if(status){
				var name=$(this).children('a').children('img').attr('alt');
				$(this).append('<div class="p_textdock">'+name+'</div>');
				$('.p_textdock').fadeIn(time)
				}
			});
			

			


			this.prev().stop().animate({top:-(value/2)},time);
			this.next().stop().animate({top:-(value/2)},time);

			}


			return this}
})(jQuery);